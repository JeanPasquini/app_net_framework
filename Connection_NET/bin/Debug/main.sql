CREATE DATABASE appDBJP;
GO

USE [appDBJP]
GO
/****** Object:  Table [dbo].[BUTTON]    Script Date: 08/10/2024 09:19:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[BUTTON](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[BUTTONNAME] [varchar](50) NULL,
	[DESCRIPTION] [varchar](max) NULL,
PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[BUTTONRELATION]    Script Date: 08/10/2024 09:19:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[BUTTONRELATION](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[IDUSER] [int] NULL,
	[IDBUTTON] [int] NULL,
PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DEPARTMENT]    Script Date: 08/10/2024 09:19:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DEPARTMENT](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[DEPARTMENTNAME] [varchar](50) NOT NULL,
	[DESCRIPTION] [varchar](255) NULL,
PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DEPARTMENTRELATION]    Script Date: 08/10/2024 09:19:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DEPARTMENTRELATION](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[IDUSER] [int] NULL,
	[IDDEPARTMENT] [int] NULL,
PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[USERS]    Script Date: 08/10/2024 09:19:37 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[USERS](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[USERNAME] [varchar](50) NOT NULL,
	[PASSWORD] [varchar](255) NOT NULL,
	[FULLNAME] [varchar](50) NULL,
	[EMAIL] [varchar](100) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
SET IDENTITY_INSERT [dbo].[BUTTON] ON 
GO
INSERT [dbo].[BUTTON] ([ID], [BUTTONNAME], [DESCRIPTION]) VALUES (1, N'Product Register', N'Put new products in table.')
GO
SET IDENTITY_INSERT [dbo].[BUTTON] OFF
GO
SET IDENTITY_INSERT [dbo].[DEPARTMENT] ON 
GO
INSERT [dbo].[DEPARTMENT] ([ID], [DEPARTMENTNAME], [DESCRIPTION]) VALUES (1, N'ADM', N'All control')
GO
INSERT [dbo].[DEPARTMENT] ([ID], [DEPARTMENTNAME], [DESCRIPTION]) VALUES (2, N'COMMON USER', N'Dont have acess')
GO
SET IDENTITY_INSERT [dbo].[DEPARTMENT] OFF
GO
SET IDENTITY_INSERT [dbo].[DEPARTMENTRELATION] ON 
GO
INSERT [dbo].[DEPARTMENTRELATION] ([ID], [IDUSER], [IDDEPARTMENT]) VALUES (1, 1, 1)
GO
INSERT [dbo].[DEPARTMENTRELATION] ([ID], [IDUSER], [IDDEPARTMENT]) VALUES (2, 2, 2)
GO
SET IDENTITY_INSERT [dbo].[DEPARTMENTRELATION] OFF
GO
SET IDENTITY_INSERT [dbo].[USERS] ON 
GO
INSERT [dbo].[USERS] ([ID], [USERNAME], [PASSWORD], [FULLNAME], [EMAIL]) VALUES (1, N'admin', N'1234', N'adminTest', N'admin@hotmail.com')
GO
INSERT [dbo].[USERS] ([ID], [USERNAME], [PASSWORD], [FULLNAME], [EMAIL]) VALUES (2, N'user', N'1234', N'userTest', N'user@hotmail.com')
GO
SET IDENTITY_INSERT [dbo].[USERS] OFF
GO
SET ANSI_PADDING ON
GO
/****** Object:  Index [UQ__DEPARTME__36A571F82CE6CC13]    Script Date: 08/10/2024 09:19:37 ******/
ALTER TABLE [dbo].[DEPARTMENT] ADD UNIQUE NONCLUSTERED 
(
	[DEPARTMENTNAME] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
GO
SET ANSI_PADDING ON
GO
/****** Object:  Index [UQ__USERS__161CF724AC51E62B]    Script Date: 08/10/2024 09:19:37 ******/
ALTER TABLE [dbo].[USERS] ADD UNIQUE NONCLUSTERED 
(
	[EMAIL] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
GO
SET ANSI_PADDING ON
GO
/****** Object:  Index [UQ__USERS__B15BE12E182908AA]    Script Date: 08/10/2024 09:19:37 ******/
ALTER TABLE [dbo].[USERS] ADD UNIQUE NONCLUSTERED 
(
	[USERNAME] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
GO
ALTER TABLE [dbo].[BUTTONRELATION]  WITH CHECK ADD  CONSTRAINT [FK_Button] FOREIGN KEY([IDBUTTON])
REFERENCES [dbo].[BUTTON] ([ID])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[BUTTONRELATION] CHECK CONSTRAINT [FK_Button]
GO
ALTER TABLE [dbo].[BUTTONRELATION]  WITH CHECK ADD  CONSTRAINT [FK_UserButton] FOREIGN KEY([IDUSER])
REFERENCES [dbo].[USERS] ([ID])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[BUTTONRELATION] CHECK CONSTRAINT [FK_UserButton]
GO
ALTER TABLE [dbo].[DEPARTMENTRELATION]  WITH CHECK ADD  CONSTRAINT [FK_Department] FOREIGN KEY([IDDEPARTMENT])
REFERENCES [dbo].[DEPARTMENT] ([ID])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[DEPARTMENTRELATION] CHECK CONSTRAINT [FK_Department]
GO
ALTER TABLE [dbo].[DEPARTMENTRELATION]  WITH CHECK ADD  CONSTRAINT [FK_UserDepartment] FOREIGN KEY([IDUSER])
REFERENCES [dbo].[USERS] ([ID])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[DEPARTMENTRELATION] CHECK CONSTRAINT [FK_UserDepartment]
GO
